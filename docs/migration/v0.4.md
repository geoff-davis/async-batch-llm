# Migration Guide: v0.4

This guide covers migrating to v0.4 from earlier versions.

See the [full migration document](../../docs/MIGRATION_V0_4.md) for complete details.

## Key Changes in v0.4

### 1. Gemini Client Update

The Google Gemini client library changed from `google.generativeai` to `google.genai`.

**Before (v0.3):**

```python
import google.generativeai as genai

genai.configure(api_key="your-key")
client = genai  # Module as client
```

**After (v0.4):**

```python
from google import genai

client = genai.Client(api_key="your-key")
```

### 2. Updated Dependencies

Update your dependencies:

```bash
# Old
pip install 'async-batch-llm[gemini]'  # Would install google-generativeai

# New
pip install 'async-batch-llm[gemini]'  # Now installs google-genai>=1.46.0
```

### 3. GeminiStrategy Changes

If using `GeminiStrategy` or `GeminiCachedStrategy`, update client creation:

```python
from google import genai
from async_batch_llm.llm_strategies.gemini import GeminiStrategy

# Create new-style client
client = genai.Client(api_key="your-key")

strategy = GeminiStrategy(
    client=client,
    model="gemini-2.5-flash",
    output_type=str
)
```

## See Also

- [v0.1 Migration](v0.1.md) - Strategy pattern introduction
- [Full v0.4 Migration Guide](../../docs/MIGRATION_V0_4.md)
